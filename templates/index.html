<!doctype html>
<html>
  <head>
    <title>WebSocket echo test</title>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <script>
      var open = false
        , lastMessage;

      window.onload = function () {
        // create socket
        var ws = new WebSocket('ws://localhost:3000');
        ws.onopen = function () {
          open = true;
        };
        ws.onmessage = function ( env ) {
          // we got echo back, measure latency
          document.getElementById('data').innerHTML = env.data;
        };

		// attach listeners to login form
        document.getElementById('menueLogin').onclick = function () {
          document.getElementById('login').style.visibility='visible';
        };
        
        document.getElementById('loginCancel').onclick = function () {
          document.getElementById('loginUsername').value='';
          document.getElementById('loginPassword').value='';
          document.getElementById('login').style.visibility='hidden';
        };
        
        document.getElementById('loginSubmit').onclick = function () {
          var usr = document.getElementById('loginUsername').value;
          var pw = document.getElementById('loginPassword').value;
          alert("Login als " + usr + "\nPasswort: " + pw );
          document.getElementById('login').style.visibility='hidden';
        };
        
        // attach listeners to form
        document.getElementById('send').onsubmit = function () {
          if (open) {
            // record the timestamp
            lastMessage = +new Date;
            // send the message
            ws.send(document.getElementById('text').value);
            // clear the input
            document.getElementById('text').value = '';
            document.getElementById('text').focus();
          }
          return false;
        };
        
      };
    </script>
  </head>
  <body>
  	<div id="wrapper">
        <div id="headerwrap">
	        <div id="header">
	            <span class="mrTitle">Mixed Reality Web Graphics</span>
	        </div>
        </div>
        <div id="navigationwrap">
	        <div id="navigation">
	        	<!-- MENUE START -->
	            <span class="button menueItemActive" id="menueGames">Games</span>
	            <span class="button" id="menueAdmin">Admin</span>
	            <span class="menueSeperator"> </span>
	            <span class="button" id="menueLogin">Login</span>
	            <!-- MENUE END -->
	        </div>
        </div>
        <div id="contentliquid"><div id="contentwrap">
        <div id="content">
        	<!-- CONTENT BEGIN -->
        	<div class="gameList", id="gameList">
	        	<span class="gameEntry" id="game1">
	        		<span class="gameEntryElement">Game 1: Maus vs. Elefant<br /><i>Status: playing</i></span>
	        		<span class="button">Join</span>
	        	</span>
	        	<span class="gameEntry" id="game2">
	        		<span class="gameEntryElement">Game 2: Pe vs. Nis<br /><i>Status: kickoff</i></span>
	        		<span class="button">Join</span>
	        	</span>
        	</div>
        	<!-- CONTENT END -->
        </div>
        </div></div>
        <div id="footerwrap">
	        <div id="footer">
	            <span id="mr-subtitle">&copy;2013 by <a href="http://www.northern-stars.de">NorthernStars</a></span>
	        </div>
        </div>
    </div>
    
    <div class="overlay" id="login">
	    <div class="overlayWrapper">
	    	<div class="overlayForm" id="loginForm">
	    		<div class="overlayCancel" id="loginCancel">X</div>
	    		<div class="overlayRow">
	    			<div class="overlayFormEntry">Username:</div>
	    		</div>
	    		<div class="overlayRow">
	    			<div class="overlayFormEntry"><input type="text" class="textInput" id="loginUsername" /></div>
	    		</div>
	    		<div class="overlayRow">
	    			<div class="overlayFormEntry">Password:</div>
	    		</div>
	    		<div class="overlayRow">
	    			<div class="overlayFormEntry"><input type="password" class="textInput" id="loginPassword" /></div>
	    		</div>
	    		<div class="overlayRow"><div class="overlayFormEntry"> </div></div>
	    		<div class="overlayRow">
	    			<div class="button" id="loginSubmit">Login</div>
	    		</div>
	    	</div>
	    </div>
	</div>
  </body>
</html>
